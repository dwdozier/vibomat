# Documentation Agent Implementation Plan

## Overview

We will implement a **Documentation Agent** as a CI/CD service that automatically
updates project documentation when code changes are detected. This agent acts as
a "human layer" over raw specs and code, ensuring that **root-level
documentation** (`README.md`, `CONTRIBUTING.md`, `SETUP.md`) and **usage guides**
remain accurate, up-to-date, and aligned with the **Google Developer
Documentation Style**.

## Core Components

### 1. Automation Script (`agent_docs.py`)

A Python script located in `backend/core/` (or `scripts/`) that:

* **Input**: Reads `openapi.json`, `git diff`, and current content of target files.
* **Processing**: Uses Gemini 2.5 Flash to analyze changes and determine their impact.
* **Prompting**: Adheres strictly to the Google Developer Documentation Style Guide.
* **Targets**:
  * **`README.md`**: Updates "Tech Stack", "Core Features", and "Quick Start".
  * **`CONTRIBUTING.md`**: Updates "Testing Requirements" and "Workflow".
  * **`SETUP.md`**: Updates installation steps if environment setup changes.
  * **`docs/guides/*.md`**: Generates new usage scenarios for API updates.

### 2. GitHub Action Workflow (`.github/workflows/doc-agent.yml`)

A workflow that:

* **Triggers**: On push to `main` (paths: `backend/**`, `frontend/**`, etc.).
* **Steps**:
    1. Checkout code.
    2. Setup Python.
    3. Run `agent_docs.py` with access to the full codebase context.
    4. Create a Pull Request with the generated documentation updates.
        * **PR Body**: "PR generated by Gemini to sync docs with code changes."

### 3. Change Detection Logic

The agent will use file path patterns to determine which docs need attention:

* `pyproject.toml`, `frontend/package.json` -> Check **`README.md`**,
  **`SETUP.md`**, **`CONTRIBUTING.md`**.
* `docker-compose.yml`, `Dockerfile` -> Check **`README.md`**, **`SETUP.md`**.
* `.pre-commit-config.yaml`, `.github/workflows/*` -> Check **`CONTRIBUTING.md`**.
* `backend/app/**`, `frontend/src/**` -> Check **`README.md`** and generate
  **`docs/guides/`**.

## Style Guide Enforcement

The agent's prompt will explicitly enforce:

* **Clarity**: No "please", "simply", "just".
* **Structure**: Clear prerequisites, numbered steps for procedures.
* **Voice**: "Run the command" (Imperative) instead of "You should run...".
* **Review**: The script will perform a self-reflection pass to ensure edits
  don't break existing Markdown structure.

## Implementation Steps

1. **Scaffold**: Create `scripts/agent_docs.py`.
2. **Workflow**: Create `.github/workflows/doc-agent.yml`.
3. **Configure**: Set up `GEMINI_API_KEY` in GitHub Secrets.
4. **Test**: Run manually against a sample diff to verify updates.
